_format_version: "1.1"

services:
- name: argonaut-service
  url: http://host.docker.internal:8090/
  routes:
  - name: argonaut-base-api-route
    paths:
    - /
    strip_path: false
    plugins:
    - name: health-apis-token-validator
      config:
        verification_url: https://dev-api.va.gov/internal/auth/v0/validation
        verification_timeout: 10000
        api_key: UMNiXRfo09iVWbBxUdgc7fY8CTSJUOMj
        static_token: 8WizfjH0edmy6A2cDa6I
        static_icn: 1011537977V693883
  - name: argonaut-token-route
    paths:
    - /token
    strip_path: false
    plugins:
    - name: health-apis-static-token-handler
      config:
        static_refresh_token: chLzDGI3TkJM8L7TiVDDw6EyCO5yeGj6XNMzLdg3
        static_access_token: 8WizfjH0edmy6A2cDa6I
        static_expiration: 3599
        static_icn: 1011537977V693883
        static_scopes: "launch/patient offline_access patient/Patient.read patient/Medication.read patient/Condition.read patient/Immunization.read patient/AllergyIntolerance.read patient/MedicationOrder.read patient/MedicationStatement.read patient/Procedure.read patient/Observation.read patient/DiagnosticReport.read patient/Encounter.read patient/Location.read"
    - name: health-apis-patient-registration
      config:
        register_patient: true
        ids_url: http://host.docker.internal:8089/api/v1/ids
        token_url: https://dev-api.va.gov/oauth2/token
        token_timeout: 10000
        static_refresh_token: chLzDGI3TkJM8L7TiVDDw6EyCO5yeGj6XNMzLdg3
        static_icn: 1011537977V693883
  - name: argonaut-metadata-route
    paths:
    - /metadata
    - /.well-known
    strip_path: false
  - name: argonaut-informational-routes
    paths:
    - /actuator
    - /openapi.*
    strip_path: false
